<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰é‹¼å½°æ¿±å» å€ç…§æ˜ç”¨é›»ä¾†æºæŸ¥è©¢ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #ecf0f1;
            height: 100dvh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100dvh;
            position: relative;
        }

        /* å´é‚Šæ¬„ */
        .sidebar {
            width: 340px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            text-align: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .sidebar-header h2 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .search-box {
            position: relative;
            margin-top: 10px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 14px;
            outline: none;
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .zone-section {
            margin: 15px 0;
        }

        .zone-title {
            padding: 10px 20px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            font-weight: bold;
            border-left: 10px solid #3498db;
            margin-bottom: 10px;
        }

        .camera-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 6px;
            padding: 0 10px;
        }



        .camera-btn {
            padding: 4px 4px;
            border: 2px solid #3498db;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
        }

        /* æ–°å¢é€™æ®µï¼šé‡å°ç‰¹å®šæŒ‰éˆ•ç¸®å°å­—é«” */
        .camera-btn-small {
            font-size: 12px;  /* æˆ– 11pxï¼Œæ‚¨å¯ä»¥èª¿æ•´ */
        }
        .camera-btn:hover {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .camera-btn.active {
            background: #e74c3c;
            border-color: #e74c3c;
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 80px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        /* ä¸»è¦å…§å®¹å€ */
        .main-content {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .map-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            cursor: grab;
        }

        .map-container:active {
            cursor: grabbing;
        }

        .map-content {
            position: absolute;
            transform-origin: 0 0;
        }

        .floor-plan {
            display: block;
            height: auto;
            user-select: none;
        }

        /* ç›£è¦–å™¨æ¨™è¨˜ */
        .camera-marker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #e74c3c;
            border: 5px solid white;
            border-radius: 90%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .camera-marker:hover {
            transform: translate(-50%, -50%) scale(1.5);
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.5);
        }

        .camera-marker.active {
            background: #FF5809;
            animation: pulse 2s infinite;
            transform: translate(-50%, -50%) scale(1.7);
            }

        .camera-marker .label {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 50px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .camera-marker:hover .label {
            opacity: 1;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .zoom-controls {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .zoom-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            transition: all 0.3s ease;
        }

        .zoom-btn:hover {
            background: #3498db;
            color: white;
        }

        .zoom-btn:not(:last-child) {
            border-bottom: 1px solid #ecf0f1;
        }

        /* è³‡è¨Šé¢æ¿ */
        .info-panel {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 18px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            max-width: 320px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .info-panel.active {
            transform: translateY(0);
            opacity: 1;
        }

        .info-panel h3 {
            color: #1B2631;
            margin-bottom: 8px;
            font-size: 20px;
        }

        .info-panel p {
            color: #545E5F;
            margin-bottom: 4px;
            font-size: 14px;
        }

        /* æ–°å¢ï¼šé—œé–‰æŒ‰éˆ• */
        .info-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: none;
            font-size: 20px;
            color: #7f8c8d;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .info-close-btn:hover {
            background: #ecf0f1;
            color: #2c3e50;
        }

/* æ–°å¢ï¼šæ”¶èµ·/å±•é–‹æŒ‰éˆ• */
.info-toggle-btn {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid #3498db;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 14px;
    color: #3498db;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    z-index: 1001;
}

.info-toggle-btn:hover {
    background: #3498db;
    color: white;
}

/* æ”¶èµ·ç‹€æ…‹ */
.info-panel.collapsed {
    transform: translateY(calc(100% - 30px)) !important;
    opacity: 1 !important;
}

.info-panel.collapsed .info-close-btn,
.info-panel.collapsed h3,
.info-panel.collapsed p,
.info-panel.collapsed #infoPowerPath {
    display: none;
}

        #infoPowerPath {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }

        .power-path-label {
            color: #545E5F;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .power-path-button {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 5px 12px;
            margin: 3px;
            border-radius: 5px;
            font-size: 13px;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .power-path-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.4);
        }

        .power-path-arrow {
            color: #7f8c8d;
            margin: 0 5px;
            font-size: 14px;
        }

        /* æ‰‹æ©Ÿç«¯é©é… */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: fixed;
                height: 100dvh;
                transform: translateX(-100%);
                z-index: 2000;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                width: 100%;
            }

            .menu-toggle {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 2001;
                background: rgba(255, 255, 255, 0.95);
                border: none;
                border-radius: 8px;
                padding: 10px;
                cursor: pointer;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }

            .camera-grid {
                grid-template-columns: repeat(3, 1fr);  /* å›ºå®šä¸‰å€‹ä¸€è¡Œ */
                gap: 6px;
            }

            .info-panel {
                bottom: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }

        }


            /* Aå€é»é»ï¼ˆç´…è‰²ï¼‰ */
            .camera-marker.zone-a {
                background: #e74c3c;  /* ç´…è‰² */
            }

            /* Bå€é»é»ï¼ˆç¶ è‰²ï¼‰ */
            .camera-marker.zone-b {
                background: #27ae60;  /* ç¶ è‰² */
            }

            .camera-marker.zone-a.active {
                background: #FF5809;  /* ç´…è‰²æ¿€æ´»ç‹€æ…‹ */
                animation: pulse 2s infinite;
                transform: translate(-50%, -50%) scale(1.7);
            }

            .camera-marker.zone-b.active {
                background: #2ecc71;  /* ç¶ è‰²æ¿€æ´»ç‹€æ…‹ */
                animation: pulse 2s infinite;
                transform: translate(-50%, -50%) scale(1.7);
            }
    </style>
</head>
<body>
    <div class="container">
        <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
        
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>å‰é‹¼å½°æ¿±å» å€<br>ç…§æ˜ç”¨é›»ä¾†æºæŸ¥è©¢ç³»çµ±</h2>

                 <button onclick="showPdfModal()" style="
                 margin-top: 8px;
                 background-color: #ffffff4;
                 border: 1px solid #fff;
                 border-radius: 6px;
                 padding: 6px 12px;
                 font-size: 13px;
                 color: #2c3e50;
                 cursor: pointer;
                 transition: background 0.2s;
                 ">ğŸ” æŸ¥çœ‹ä½¿ç”¨èªªæ˜</button>

                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="æœå°‹..." onkeyup="searchCameras()">
                </div>
            </div>
            
            <div class="zone-section">
                <div class="zone-title">ğŸ’¡ç…§æ˜ğŸ’¡</div>
                <div class="camera-grid" id="zoneA"></div>
            </div>
            
            <div class="zone-section">
                <div class="zone-title">âš¡é›»ç®±âš¡</div>
                <div class="camera-grid" id="zoneB"></div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="map-container" id="mapContainer">
                <div class="map-content" id="mapContent">
                    <img id="floorImage" src="é›»ç‡ˆé›»æº.png" class="floor-plan" />
                        <!-- å»ºç¯‰ç‰©å¤–æ¡† -->
                       
                </div>
            </div>
            
            <div class="controls">
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomIn()">+</button>
                    <button class="zoom-btn" onclick="zoomOut()">-</button>
                </div>
            </div>
            
            <div class="info-panel" id="infoPanel">

    <!-- æ–°å¢é—œé–‰æŒ‰éˆ• -->
    <button class="info-close-btn" onclick="clearSelection()" title="æ¸…é™¤é¸æ“‡">âœ•</button>
    
    <!-- æ–°å¢æ”¶èµ·/å±•é–‹æŒ‰éˆ• -->
    <button class="info-toggle-btn" id="infoToggleBtn" onclick="toggleInfoPanel()">â–¼</button>

                <h3 id="infoTitle">è«‹é¸æ“‡è¨­å‚™</h3>
                <p id="infoLine1">--</p>
                <p id="infoLine2">--</p>
                <p id="infoLine3">--</p>
                <div id="infoPowerPath"></div>
                </div>
        </div>
    </div>

    <script>
        // ç”¨é›»è¨­å‚™åŠé›»æºç®±æ•¸æ“š
        const cameras = {
            A: ['å» æˆ¿1-1ğŸ’¡', 'å» æˆ¿1-2ğŸ’¡', 'å» æˆ¿1-3ğŸ’¡', 'å» æˆ¿1-4ğŸ’¡', 'å» æˆ¿1-5ğŸ’¡', 'å» æˆ¿1-6ğŸ’¡', 'å» æˆ¿2-1ğŸ’¡', 'å» æˆ¿2-2ğŸ’¡', 'å» æˆ¿2-3ğŸ’¡', 'å» æˆ¿2-4ğŸ’¡', 'å» æˆ¿3-1ğŸ’¡', 'å» æˆ¿3-2ğŸ’¡', 'å» æˆ¿3-3ğŸ’¡', 'å» æˆ¿3-4ğŸ’¡', 'å» æˆ¿3-5ğŸ’¡', 'å» æˆ¿3-6ğŸ’¡', 'å» æˆ¿4-1ğŸ’¡', 'å» æˆ¿4-2ğŸ’¡', 'å» æˆ¿4-3ğŸ’¡', 'å» æˆ¿4-4ğŸ’¡','åŒ—å´é›¨é®-æ±','åŒ—å´é›¨é®-è¥¿', 'å½°æ¿±å€‰-åŒ—ğŸ’¡', 'å½°æ¿±å€‰-ä¸­ğŸ’¡', 'å½°æ¿±å€‰-å—ğŸ’¡', 'å½°æ¿±å€‰æ–™æ¶ğŸ’¡', 'æœƒè­°å®¤ğŸ’¡', 'æ±å´ç”²æ¢¯ä¸‹ğŸ’¡', 'å™´ç ‚å®¤-åŒ—ğŸ’¡', 'å™´ç ‚å®¤-å—ğŸ’¡', 'èª¿æ¼†å®¤ğŸ’¡', 'åˆ¤ç‰‡å®¤ğŸ’¡', 'ç„Šæç®¡åˆ¶å®¤ğŸ’¡', 'ç„Šæå®¤å¤–ğŸ’¡', 'é«˜å£“è®Šé›»ç«™ğŸ’¡', 'å½°æ¿±è¥¿3FğŸ’¡', 'è‡¨æ™‚è¾¦å…¬å®¤ğŸ’¡', 'å»æ‰€æ„Ÿæ‡‰ç‡ˆğŸ’¡', 'å»æ‰€èµ°å»ŠğŸ’¡', 'ç”·ç”Ÿå»æ‰€ğŸ’¡', 'å¥³ç”Ÿå»æ‰€ğŸ’¡', 'æ®˜éšœå»æ‰€ğŸ’¡', 'æ±å´éµæ²é–€ğŸ’¡', 'å—å´éµæ²é–€ğŸ’¡', 'è¥¿åŒ—å´éµæ²é–€', 'è¥¿å—å´éµæ²é–€1', 'è¥¿å—å´éµæ²é–€2', 'ç‹—å±‹æ¢ç…§ç‡ˆğŸ’¡', 'è­¦è¡›å®¤å…§éƒ¨ğŸ’¡', 'è­¦è¡›å®¤å»æ‰€ğŸ’¡', 'è­¦è¡›å®¤å¤–æ±ğŸ’¡', 'è­¦è¡›å®¤å¤–åŒ—ğŸ’¡', 'è­¦è¡›å®¤å¤–è¥¿ğŸ’¡', 'è­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆ','æ¶ˆé˜²æ©Ÿæˆ¿å…§ğŸ’¡' ],

            B: ['MP2(é›»æ°£å®¤)', 'MP2A(é›»æ°£å®¤)','1P3', '1P3A', '1L3', '1P4', '1P4A', '1P4B', '1L4', '1P5', '1P5A', '1P5B', '1P6', '1P6A', '1L6', '1P7', '1P7A', '1P7B', '1P7A L&R', 'æ–™æ¶ç…§æ˜ç›¤', '1P8', '1P8A', '1P8B', '1P8BR1', '1P9', '1P9A', '1P9B', '1L9', '1L9A', '1R9A', '1P10', 'ç§»å‹•å¼é›»æºç›¤', '1P10A', '1P11', '1L14', '1R14', '1P12', '1P13', '1L13', '1R13', 'æ¶²ä½æ§åˆ¶ç›¤', 'PF&LF(ATS)', 'PFA', 'PF2', 'PF5', '1L15'],
        };


            const powerMapping = {
                'å» æˆ¿1-1ğŸ’¡': '1L3', 'å» æˆ¿1-2ğŸ’¡': '1L3', 'å» æˆ¿1-3ğŸ’¡': '1L3', 
                'å» æˆ¿1-4ğŸ’¡': '1L3', 'å» æˆ¿1-5ğŸ’¡': '1L3', 'å» æˆ¿1-6ğŸ’¡': '1L3',
                'å» æˆ¿2-1ğŸ’¡': '1L4', 'å» æˆ¿2-2ğŸ’¡': '1L4', 'å» æˆ¿2-3ğŸ’¡': '1L4', 'å» æˆ¿2-4ğŸ’¡': '1L4',
                'å» æˆ¿3-1ğŸ’¡': '1L6', 'å» æˆ¿3-2ğŸ’¡': '1L6', 'å» æˆ¿3-3ğŸ’¡': '1L6',
                'å» æˆ¿3-4ğŸ’¡': '1L6', 'å» æˆ¿3-5ğŸ’¡': '1L6', 'å» æˆ¿3-6ğŸ’¡': '1L6',
                'å» æˆ¿4-1ğŸ’¡': '1L9', 'å» æˆ¿4-2ğŸ’¡': '1L9', 'å» æˆ¿4-3ğŸ’¡': '1L9', 'å» æˆ¿4-4ğŸ’¡': '1L9',
                'å—å´éµæ²é–€ğŸ’¡': '1L3', 'æ±å´éµæ²é–€ğŸ’¡': '1P5',
                'è¥¿åŒ—å´éµæ²é–€': '1L4', 'è¥¿å—å´éµæ²é–€1': '1P5', 'è¥¿å—å´éµæ²é–€2': '1L9',
                'å½°æ¿±å€‰-å—ğŸ’¡': '1L6', 'å½°æ¿±å€‰-ä¸­ğŸ’¡': '1L6', 'å½°æ¿±å€‰-åŒ—ğŸ’¡': '1L6',
                'å½°æ¿±å€‰æ–™æ¶ğŸ’¡': 'æ–™æ¶ç…§æ˜ç›¤',
                'æœƒè­°å®¤ğŸ’¡': '1P7A L&R',
                'æ±å´ç”²æ¢¯ä¸‹ğŸ’¡': '1P7A L&R',
                'å™´ç ‚å®¤-åŒ—ğŸ’¡': '1L9', 'å™´ç ‚å®¤-å—ğŸ’¡': '1L9',
                'èª¿æ¼†å®¤ğŸ’¡': '1L9',
                'ç„Šæç®¡åˆ¶å®¤ğŸ’¡': '1L9A', 'ç„Šæå®¤å¤–ğŸ’¡': '1L9',
                'ç”·ç”Ÿå»æ‰€ğŸ’¡': '1L9A', 'å¥³ç”Ÿå»æ‰€ğŸ’¡': '1L9A', 'æ®˜éšœå»æ‰€ğŸ’¡': '1L9A',
                'å»æ‰€æ„Ÿæ‡‰ç‡ˆğŸ’¡': '1L14', 'å»æ‰€èµ°å»ŠğŸ’¡': '1L9A',
                'é«˜å£“è®Šé›»ç«™ğŸ’¡': '1L9A',
                'åˆ¤ç‰‡å®¤ğŸ’¡': '1L9A',
                'è‡¨æ™‚è¾¦å…¬å®¤ğŸ’¡': '1L14',
                'å½°æ¿±è¥¿3FğŸ’¡': '1L14',
                'è­¦è¡›å®¤å…§éƒ¨ğŸ’¡': '1L13', 'è­¦è¡›å®¤å»æ‰€ğŸ’¡': '1L13', 'è­¦è¡›å®¤å¤–æ±ğŸ’¡': '1L13',
                'è­¦è¡›å®¤å¤–åŒ—ğŸ’¡': '1L13', 'è­¦è¡›å®¤å¤–è¥¿ğŸ’¡': '1L13', 'è­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆ': '1L13',
                'ç‹—å±‹æ¢ç…§ç‡ˆğŸ’¡': 'PF&LF(ATS)','æ¶ˆé˜²æ©Ÿæˆ¿å…§ğŸ’¡': 'PF&LF(ATS)',
                'åŒ—å´é›¨é®-æ±': 'ç§»å‹•å¼é›»æºç›¤', 'åŒ—å´é›¨é®-è¥¿': 'ç§»å‹•å¼é›»æºç›¤'
                // ... å®šç¾©æ‰€æœ‰Aå€è¨­å‚™å°æ‡‰çš„Bå€é›»æº
            };



        // ç”¨é›»è¨­å‚™åŠé›»æºç®±ä½ç½®é…ç½® - æ ¹æ“šå¹³é¢åœ–å¯¦éš›ä½ç½®
        const cameraPositions = {
            // Aå€
            'å» æˆ¿1-1ğŸ’¡': { 
                 positions: [ { x: 4986, y: 2444}, { x: 4670, y: 2444}, { x: 5303, y: 2444}, { x: 5619, y: 2444} ],
                 name: 'å» æˆ¿ç…§æ˜1-1', nfb: '1L3â”€( 1 )', boxName: '(1)L200W*4', displayName: '(1)ğŸ’¡' },
            'å» æˆ¿1-2ğŸ’¡': {
                 positions: [ { x: 4986, y: 3529}, { x: 4670, y: 3529}, { x: 5303, y: 3529}, { x: 5619, y: 3529} ],
                 name: 'å» æˆ¿ç…§æ˜1-2', nfb: '1L3â”€( 3 )', boxName: '(3)L200W*4', displayName: '(3)ğŸ’¡' },
            'å» æˆ¿1-3ğŸ’¡': {
                 positions: [ { x: 4037, y: 3167}, { x: 3721, y: 3167}, { x: 4354, y: 3167} ],
                 name: 'å» æˆ¿ç…§æ˜1-3', nfb: '1L3â”€( 5 )', boxName: '(5)L200W*4', displayName: '(5)ğŸ’¡' },
            'å» æˆ¿1-4ğŸ’¡': { 
                 positions: [ { x: 4986, y: 3167}, { x: 4670, y: 3167}, { x: 5303, y: 3167}, { x: 5619, y: 3167} ],
                 name: 'å» æˆ¿ç…§æ˜1-4', nfb: '1L3â”€( 2 )', boxName: '(2)L200W*4', displayName: '(2)ğŸ’¡' },
            'å» æˆ¿1-5ğŸ’¡': { 
                 positions: [ { x: 4037, y: 2444}, { x: 3721, y: 2444}, { x: 4354, y: 2444} ],               
                 name: 'å» æˆ¿ç…§æ˜1-5', nfb: '1L3â”€( 4 )', boxName: '(4)L200W*4', displayName: '(4)ğŸ’¡' },
            'å» æˆ¿1-6ğŸ’¡': { 
                 positions: [ { x: 4037, y: 3529}, { x: 3721, y: 3529}, { x: 4354, y: 3529} ],
                 name: 'å» æˆ¿ç…§æ˜1-6', nfb: '1L3â”€( 6 )', boxName: '(6)L200W*4', displayName: '(6)ğŸ’¡' },
            'å—å´éµæ²é–€ğŸ’¡': {
                 positions: [ { x: 5964, y: 3300}, { x: 5964, y: 3761} ], 
                 name: 'å—å´éµæ²é–€ç…§æ˜', nfb: '1L3â”€( 14 )', boxName: '(14)å—å´éµæ²é–€ç…§æ˜', displayName: '(14)ğŸ’¡' },
            'å» æˆ¿2-1ğŸ’¡': { 
                 positions: [ { x: 4986, y: 3891}, { x: 4670, y: 3891}, { x: 5303, y: 3891}, { x: 5619, y: 3891} ],
                 name: 'å» æˆ¿ç…§æ˜2-1', nfb: '1L4â”€( 1 )', boxName: '(1)L200W*4', displayName: '(1)ğŸ’¡' },
            'å» æˆ¿2-2ğŸ’¡': { 
                 positions: [ { x: 4986, y: 4614}, { x: 4670, y: 4614}, { x: 5303, y: 4614}, { x: 5619, y: 4614} ],
                 name: 'å» æˆ¿ç…§æ˜2-2', nfb: '1L4â”€( 2 )', boxName: '(2)L200W*4', displayName: '(2)ğŸ’¡' },
            'å» æˆ¿2-3ğŸ’¡': { 
                 positions: [ { x: 4037, y: 3891}, { x: 3721, y: 3891}, { x: 4354, y: 3891} ],
                 name: 'å» æˆ¿ç…§æ˜2-3', nfb: '1L4â”€( 3 )', boxName: '(3)L200W*4', displayName: '(3)ğŸ’¡' },
            'å» æˆ¿2-4ğŸ’¡': { 
                 positions: [ { x: 4037, y: 4614}, { x: 3721, y: 4614}, { x: 4354, y: 4614} ],
                 name: 'å» æˆ¿ç…§æ˜2-4', nfb: '1L4â”€( 4 )', boxName: '(4)L200W*4', displayName: '(4)ğŸ’¡' },



            'è¥¿å—å´éµæ²é–€1': { 
                 positions: [ { x: 4315, y: 5020} ],
                 name: 'è¥¿å—å´éµæ²é–€ç…§æ˜-1', nfb: '1L4-', boxName: '-' },
            'è¥¿å—å´éµæ²é–€2': { 
                 positions: [ { x: 4370, y: 5020} ],
                 name: 'è¥¿å—å´éµæ²é–€ç…§æ˜-2', nfb: '1P5-', boxName: '-' },
            'è¥¿åŒ—å´éµæ²é–€': {  
                 positions: [ { x: 1860, y: 5020} ],
                 name: 'è¥¿åŒ—å´éµæ²é–€ç…§æ˜', nfb: '1L9-', boxName: '-' },



            'å» æˆ¿3-1ğŸ’¡': { 
                 positions: [ { x: 2771, y: 3529}, { x: 2455, y: 3529}, { x: 3088, y: 3529}, { x: 3404, y: 3529} ],
                 name: 'å» æˆ¿ç…§æ˜3-1', nfb: '1L6â”€( 1 )', boxName: '(1)L200W*4', displayName: '(1)ğŸ’¡' },
            'å» æˆ¿3-2ğŸ’¡': {  
                 positions: [ { x: 2771, y: 2444}, { x: 2455, y: 2444}, { x: 3088, y: 2444}, { x: 3404, y: 2444} ],
                 name: 'å» æˆ¿ç…§æ˜3-2', nfb: '1L6â”€( 3 )', boxName: '(3)L200W*4', displayName: '(3)ğŸ’¡' },
            'å» æˆ¿3-3ğŸ’¡': {  
                 positions: [ { x: 1505, y: 3167}, { x: 1189, y: 3167}, { x: 1822, y: 3167}, { x: 2138, y: 3167} ],
                 name: 'å» æˆ¿ç…§æ˜3-3', nfb: '1L6â”€( 5 )', boxName: '(5)L200W*4', displayName: '(5)ğŸ’¡' },
            'å» æˆ¿3-4ğŸ’¡': {  
                 positions: [ { x: 2771, y: 3167}, { x: 2455, y: 3167}, { x: 3088, y: 3167}, { x: 3404, y: 3167} ],
                 name: 'å» æˆ¿ç…§æ˜3-4', nfb: '1L6â”€( 2 )', boxName: '(2)L200W*4', displayName: '(2)ğŸ’¡' },
            'å» æˆ¿3-5ğŸ’¡': { 
                 positions: [ { x: 1505, y: 2444}, { x: 1189, y: 2444}, { x: 1822, y: 2444}, { x: 2138, y: 2444} ],
                 name: 'å» æˆ¿ç…§æ˜3-5', nfb: '1L6â”€( 4 )', boxName: '(4)L200W*4', displayName: '(4)ğŸ’¡' },
            'å» æˆ¿3-6ğŸ’¡': {  
                 positions: [ { x: 1505, y: 3529}, { x: 1189, y: 3529}, { x: 1822, y: 3529}, { x: 2138, y: 3529} ],
                 name: 'å» æˆ¿ç…§æ˜3-6', nfb: '1L6â”€( 6 )', boxName: '(6)L200W*4', displayName: '(6)ğŸ’¡' },
            'å½°æ¿±å€‰-å—ğŸ’¡': { 
                 positions: [ { x: 2550, y: 850}, { x: 2645, y: 850}, { x: 2550, y: 613}, { x: 2645, y: 613}, { x: 2550, y: 1090}, { x: 2645, y: 1090} ],
                 name: 'å½°æ¿±å€‰ç…§æ˜-å—', nfb: '1L6â”€( 7 )', boxName: '(7)æ±åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬ä¸€å€ç…§æ˜', displayName: '(7)ğŸ’¡' },
            'æ±å´éµæ²é–€ğŸ’¡': { 
                 positions: [ { x: 4315, y: 2035} ],
                 name: 'æ±å´éµæ²é–€ç…§æ˜', nfb: '1P5â”€( 6 )', boxName: '-', displayName: '(6)ğŸ’¡' },
            'å½°æ¿±å€‰-ä¸­ğŸ’¡': { 
                 positions: [ { x: 2012, y: 850}, { x: 1914, y: 850}, { x: 2234, y: 850}, { x: 2328, y: 850}, { x: 2012, y: 613}, { x: 1914, y: 613}, { x: 2234, y: 613}, { x: 2328, y: 613}, { x: 2012, y: 1090},
                              { x: 1914, y: 1090}, { x: 2234, y: 1090}, { x: 2328, y: 1090} ],
                 name: 'å½°æ¿±å€‰ç…§æ˜-ä¸­', nfb: '1L6â”€( 9 )', boxName: '(9)æ±åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬äºŒå€ç…§æ˜', displayName: '(9)ğŸ’¡' },
            'å½°æ¿±å€‰-åŒ—ğŸ’¡': { 
                 positions: [ { x: 1381, y: 850}, { x: 1285, y: 850}, { x: 1602, y: 850}, { x: 1696, y: 850}, { x: 1381, y: 613}, { x: 1285, y: 613}, { x: 1602, y: 613}, { x: 1696, y: 613}, { x: 1381, y: 1090},
                              { x: 1285, y: 1090}, { x: 1602, y: 1090}, { x: 1696, y: 1090} ],
                 name: 'å½°æ¿±å€‰ç…§æ˜-åŒ—', nfb: '1L6â”€( 12 )', boxName: '(12)æ±åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬ä¸‰å€ç…§æ˜', displayName: '(12)ğŸ’¡' },
            'æœƒè­°å®¤ğŸ’¡': { 
                 positions: [ { x: 2868, y: 850}, { x: 2963, y: 850}, { x: 2868, y: 613}, { x: 2963, y: 613}, { x: 2868, y: 1090}, { x: 2963, y: 1090} ],
                 name: 'æœƒè­°å®¤ç…§æ˜', nfb: '1P7A L&Râ”€( 3 )', boxName: '-', displayName: '(3)ğŸ’¡' },
            'å½°æ¿±å€‰æ–™æ¶ğŸ’¡': { 
                 positions: [ { x: 2065, y: 735} ],
                 name: 'å½°æ¿±å€‰æ–™æ¶ç…§æ˜', nfb: 'æ–™æ¶ç…§æ˜ç›¤â”€( 2 )', boxName: '-', displayName: '(2)ğŸ’¡' },
            'å» æˆ¿4-1ğŸ’¡': { 
                 positions: [ { x: 2771, y: 3891}, { x: 2455, y: 3891}, { x: 3088, y: 3891}, { x: 3404, y: 3891} ],
                 name: 'å» æˆ¿ç…§æ˜4-1', nfb: '1L9â”€( 1 )', boxName: '(1)L200W*4', displayName: '(1)ğŸ’¡' },
            'å» æˆ¿4-2ğŸ’¡': { 
                 positions: [ { x: 1505, y: 4614}, { x: 1189, y: 4614}, { x: 1822, y: 4614}, { x: 2138, y: 4614} ],
                 name: 'å» æˆ¿ç…§æ˜4-2', nfb: '1L9â”€( 4 )', boxName: '(4)L200W*4', displayName: '(4)ğŸ’¡' },
            'å» æˆ¿4-3ğŸ’¡': { 
                 positions: [ { x: 1505, y: 3891}, { x: 1189, y: 3891}, { x: 1822, y: 3891}, { x: 2138, y: 3891} ],
                 name: 'å» æˆ¿ç…§æ˜4-3', nfb: '1L9â”€( 3 )', boxName: '(3)L200W*4', displayName: '(3)ğŸ’¡' },
            'å» æˆ¿4-4ğŸ’¡': { 
                 positions: [ { x: 2771, y: 4614}, { x: 2455, y: 4614}, { x: 3088, y: 4614}, { x: 3404, y: 4614} ],
                 name: 'å» æˆ¿ç…§æ˜4-4', nfb: '1L9â”€( 2 )', boxName: '(2)L200W*4', displayName: '(2)ğŸ’¡' },
            'å™´ç ‚å®¤-åŒ—ğŸ’¡': { 
                 positions: [ { x: 752, y: 6069}, { x: 946, y: 6069}, { x: 557, y: 6069}, { x: 752, y: 6320}, { x: 946, y: 6320}, { x: 557, y: 6320}, { x: 752, y: 5818}, { x: 946, y: 5818}, { x: 557, y: 5818}],
                 name: 'å™´ç ‚å®¤ç…§æ˜-åŒ— (ç…§æ˜5-1)', nfb: '1L9â”€( 12 )', boxName: '(12)è¥¿åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬ä¸‰å€ç…§æ˜', displayName: '(12)ğŸ’¡' },
            'å™´ç ‚å®¤-å—ğŸ’¡': { 
                 positions: [ { x: 1139, y: 6069}, { x: 1139, y: 6320}, { x: 1139, y: 5818}, { x: 1433, y: 6069}, { x: 1534, y: 6069}, { x: 1433, y: 6320}, { x: 1534, y: 6320}, { x: 1433, y: 5818}, { x: 1534, y: 5818} ],
                 name: 'å™´ç ‚å®¤ç…§æ˜-å— (ç…§æ˜5-2)', nfb: '1L9â”€( 11 )', boxName: '(11)è¥¿åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬äºŒå€ç…§æ˜', displayName: '(11)ğŸ’¡' },
            'èª¿æ¼†å®¤ğŸ’¡': { 
                 positions: [ { x: 1433, y: 6069}, { x: 1534, y: 6069}, { x: 1433, y: 6320}, { x: 1534, y: 6320}, { x: 1433, y: 5818}, { x: 1534, y: 5818}, { x: 1139, y: 6069}, { x: 1139, y: 6320}, { x: 1139, y: 5818} ],
                 name: 'èª¿æ¼†å®¤ç…§æ˜ (ç…§æ˜5-2)', nfb: '1L9â”€( 11 )', boxName: '(11)è¥¿åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬äºŒå€ç…§æ˜', displayName: '(11)ğŸ’¡' },
            'ç„Šæå®¤å¤–ğŸ’¡': { 
                 positions: [ { x: 1855, y: 6045}, { x: 1747, y: 6045}, { x: 2076, y: 6045}, { x: 2185, y: 6045}, { x: 1855, y: 5810}, { x: 1747, y: 5810}, { x: 2076, y: 5810}, { x: 2185, y: 5810} ],
                 name: 'ç„Šæç®¡åˆ¶å®¤å¤–ç…§æ˜ (ç…§æ˜5-3)', nfb: '1L9â”€( 8 )', boxName: '(8)è¥¿åŒ—å´å¤¾å±¤ä¸‹æ–¹ç¬¬ä¸€å€ç…§æ˜', displayName: '(8)ğŸ’¡' },
            'é«˜å£“è®Šé›»ç«™ğŸ’¡': { 
                 positions: [ { x: 3475, y: 6100}, { x: 3355, y: 6100}, { x: 3157, y: 6100}, { x: 3030, y: 6100}, { x: 3680, y: 6100}, { x: 3800, y: 6100}, { x: 3985, y: 6100}, { x: 4105, y: 6100}, { x: 3220, y: 6210},
                              { x: 3420, y: 6210}, { x: 3820, y: 6210} ],
                 name: 'é«˜å£“è®Šé›»ç«™ç…§æ˜', nfb: '1L9Aâ”€( 3 )', boxName: '2Fé«˜å£“è®Šé›»ç«™ç…§æ˜', displayName: '(3)ğŸ’¡' },
            'ç„Šæç®¡åˆ¶å®¤ğŸ’¡': { 
                 positions: [ { x: 2124, y: 6185}, { x: 1866, y: 6185}, { x: 2124, y: 6368}, { x: 1885, y: 6368}, { x: 2396, y: 6368} ],
                 name: 'ç„Šæç®¡åˆ¶å®¤ç…§æ˜', nfb: '1L9Aâ”€( 4 )', boxName: 'é«˜å£“è®Šé›»ç«™ä¸‹æ–¹ç…§æ˜', displayName: '(4)ğŸ’¡' },
            'åˆ¤ç‰‡å®¤ğŸ’¡': { 
                 positions: [ { x: 1730, y: 6185}, { x: 1730, y: 6368} ],
                 name: 'åˆ¤ç‰‡å®¤ç…§æ˜', nfb: '1L9Aâ”€( 4 )', boxName: 'é«˜å£“è®Šé›»ç«™ä¸‹æ–¹ç…§æ˜', displayName: '(4)ğŸ’¡' },
            'ç”·ç”Ÿå»æ‰€ğŸ’¡': {  
                 positions: [ { x: 3340, y: 4880}, { x: 3210, y: 4880}, { x: 3340, y: 4940}, { x: 3210, y: 4940} ],
                 name: 'å» æˆ¿ç”·ç”Ÿå»æ‰€ç…§æ˜', nfb: '1L9Aâ”€( 1 )', boxName: 'ç”·å»ç…§æ˜åŠé€šé¢¨æ‰‡', displayName: '(1)ğŸ’¡' },
            'æ®˜éšœå»æ‰€ğŸ’¡': {  
                 positions: [ { x: 2860, y: 4800}, { x: 2950, y: 4800} ],
                 name: 'å» æˆ¿æ®˜éšœå»æ‰€ç…§æ˜', nfb: '1L9Aâ”€( 2 )', boxName: 'æ®˜å»ç…§æ˜åŠé€šé¢¨æ‰‡', displayName: '(2)ğŸ’¡' },
            'å¥³ç”Ÿå»æ‰€ğŸ’¡': { 
                 positions: [ { x: 3040, y: 4815}, { x: 3115, y: 4815}, { x: 3040, y: 4920}, { x: 3115, y: 4920} ],
                 name: 'å» æˆ¿å¥³ç”Ÿå»æ‰€ç…§æ˜', nfb: '1L9Aâ”€( 5 )', boxName: 'å¥³å»ç…§æ˜åŠé€šé¢¨æ‰‡', displayName: '(5)ğŸ’¡' },
            'å»æ‰€æ„Ÿæ‡‰ç‡ˆğŸ’¡': {  
                 positions: [ { x: 3455, y: 4770} ],
                 name: 'å» æˆ¿å»æ‰€å…¥å£æ„Ÿæ‡‰ç‡ˆ', nfb: '1L14â”€( 1 )', boxName: '1.è‡¨æ™‚è¾¦å…¬å®¤ç…§æ˜', displayName: '(1)ğŸ’¡' },
            'å»æ‰€èµ°å»ŠğŸ’¡': {  
                 positions: [ { x: 3285, y: 4775} ],
                 name: 'å» æˆ¿å»æ‰€èµ°å»Šç…§æ˜', nfb: '1L9Aâ”€( 1 )', boxName: 'ç”·å»ç…§æ˜åŠé€šé¢¨æ‰‡', displayName: '(1)ğŸ’¡' },
            'è‡¨æ™‚è¾¦å…¬å®¤ğŸ’¡': { 
                 positions: [ { x: 3775, y: 4800}, { x: 3970, y: 4800}, { x: 3850, y: 4800}, { x: 3675, y: 4780}, { x: 3625, y: 4780}, { x: 3575, y: 4780}, { x: 3525, y: 4780}, { x: 3970, y: 4940}, { x: 3850, y: 4940},
                              { x: 3610, y: 4940}, { x: 3500, y: 4940} ],
                 name: 'è‡¨æ™‚è¾¦å…¬å®¤ç…§æ˜', nfb: '1L14â”€( 1 )', boxName: '1.è‡¨æ™‚è¾¦å…¬å®¤ç…§æ˜', displayName: '(1)ğŸ’¡' },
            'å½°æ¿±è¥¿3FğŸ’¡': { 
                 positions: [ { x: 4950, y: 6150}, { x: 5060, y: 6150}, { x: 4750, y: 6150}, { x: 4640, y: 6150}, { x: 4950, y: 6050}, { x: 5060, y: 6050}, { x: 4750, y: 6050}, { x: 4640, y: 6050} ],
                 name: 'å½°æ¿±è¥¿3Fç…§æ˜', nfb: '1L14â”€( 2 )', boxName: '2.è‡¨æ™‚å®¿èˆç…§æ˜', displayName: '(2)ğŸ’¡' },
            'è­¦è¡›å®¤å…§éƒ¨ğŸ’¡': { 
                 positions: [ { x: 8680, y: 4230}, { x: 8650, y: 4130}, { x: 8750, y: 4130}, { x: 8850, y: 4130} ],
                 name: 'è­¦è¡›å®¤å…§éƒ¨ç…§æ˜', nfb: '1L13â”€( 1 )', boxName: 'è­¦è¡›å®¤å…§ç…§æ˜', displayName: '(1)ğŸ’¡' },
            'è­¦è¡›å®¤å»æ‰€ğŸ’¡': { 
                 positions: [ { x: 8800, y: 4256}, { x: 8880, y: 4256} ],
                 name: 'è­¦è¡›å®¤å»æ‰€ç…§æ˜', nfb: '1L13â”€( 6 )', boxName: 'å»æ‰€ç…§æ˜åŠé€šé¢¨æ‰‡', displayName: '(6)ğŸ’¡' },
            'è­¦è¡›å®¤å¤–æ±ğŸ’¡': { 
                 positions: [ { x: 8790, y: 4025}, { x: 8673, y: 4025} ],
                 name: 'è­¦è¡›å®¤å¤–æ±å´ç…§æ˜', nfb: '1L13â”€( 1 )', boxName: 'è­¦è¡›å®¤å…§ç…§æ˜', displayName: '(1)ğŸ’¡' },
            'è­¦è¡›å®¤å¤–åŒ—ğŸ’¡': { 
                 positions: [ { x: 8545, y: 4268} ],
                 name: 'è­¦è¡›å®¤å¤–åŒ—å´ç…§æ˜', nfb: '1L13â”€( 2 )', boxName: 'è­¦è¡›å®¤å¤–ç…§æ˜', displayName: '(2)ğŸ’¡' },
            'è­¦è¡›å®¤å¤–è¥¿ğŸ’¡': { 
                 positions: [ { x: 8554, y: 4360}, { x: 8554, y: 4650} ],
                 name: 'è­¦è¡›å®¤å¤–è¥¿å´ç…§æ˜', nfb: '1L13â”€( 2 )', boxName: 'è­¦è¡›å®¤å¤–ç…§æ˜', displayName: '(2)ğŸ’¡' },
            'è­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆ': { 
                 positions: [ { x: 8505, y: 4025}, { x: 8900, y: 3985}, { x: 8520, y: 4975} ],
                 name: 'è­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆ', nfb: '1L13â”€( 2 )', boxName: 'è­¦è¡›å®¤å¤–ç…§æ˜', displayName: '(2)ğŸ’¡' },
            'æ±å´ç”²æ¢¯ä¸‹ğŸ’¡': { positions: [ { x: 2848, y: 2422} ],
                 name: 'æ±å´ç”²æ¢¯ä¸‹æ–¹ç…§æ˜', nfb: '1P7A L&Râ”€( 3 )', boxName: '-', displayName: '(3)ğŸ’¡' },
            'æ¶ˆé˜²æ©Ÿæˆ¿å…§ğŸ’¡': { positions: [ { x: 8650, y: 4380}, { x: 8650, y: 4480}, { x: 8840, y: 4380}, { x: 8840, y: 4480} ],
                 name: 'æ¶ˆé˜²æ©Ÿæˆ¿ç…§æ˜', nfb: 'PF&LF(ATS)â”€ä¸­å±¤( 1 )', boxName: '(1)L20W/2*2', displayName: '(1)ğŸ’¡' },
            'åŒ—å´é›¨é®-æ±': { positions: [ { x: 700, y: 2800}, { x: 700, y: 2444}, { x: 700, y: 3167}, { x: 700, y: 3529} ],
                 name: 'åŒ—å´é›¨é®æ±å´ç…§æ˜', nfb: 'PF&LF(ATS)â”€ä¸­å±¤( 1 )', boxName: '-', displayName: '(3)ğŸ’¡' },
            'åŒ—å´é›¨é®-è¥¿': { positions: [ { x: 640, y: 4230}, { x: 700, y: 3891}, { x: 640, y: 4410}, { x: 640, y: 4590}, { x: 640, y: 4770} ],
                 name: 'åŒ—å´é›¨é®è¥¿å´ç…§æ˜', nfb: 'PF&LF(ATS)â”€ä¸­å±¤( 1 )', boxName: '-', displayName: '(3)ğŸ’¡' },
            'ç‹—å±‹æ¢ç…§ç‡ˆğŸ’¡': { positions: [ { x: 5778, y: 5020} ],
                 name: 'ç‹—å±‹æ¢ç…§ç‡ˆ', nfb: 'PF&LF(ATS)', boxName: '-', displayName: '-' },



            // Bå€
            'MP2(é›»æ°£å®¤)': { positions: [ { x: 3195, y: 6120} ], name: 'é«˜å£“è®Šé›»ç«™ï¼ˆé›»æ°£å®¤ï¼‰', sourceBox: '' },
            'MP2A(é›»æ°£å®¤)': { positions: [ { x: 3120, y: 6120} ], name: 'é«˜å£“è®Šé›»ç«™ï¼ˆé›»æ°£å®¤ï¼‰', sourceBox: '' },
            '1P3': { positions: [ { x: 5921, y: 2710} ], name: '7F', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P3A': { positions: [ { x: 5270, y: 2795} ], name: '7HæŸ±', sourceBox: '1P3' },
            '1L3': { positions: [ { x: 5921, y: 2660} ], name: '7F', sourceBox: '1P3' },
            '1P4': { positions: [ { x: 5921, y: 4345} ], name: '3F', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P4A': { positions: [ { x: 5270, y: 4261} ], name: '3HæŸ±', sourceBox: '1P4' },
            '1P4B': { positions: [ { x: 4000, y: 4243} ], name: '3LæŸ±', sourceBox: '1P4' },
            '1L4': { positions: [ { x: 5921, y: 4395} ], name: '3F', sourceBox: '1P4' },
            '1P5': { positions: [ { x: 3405, y: 2130} ], name: '9NæŸ±', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P5A': { positions: [ { x: 5020, y: 2090} ], name: '9IæŸ±', sourceBox: '1P5' },
            '1P5B': { positions: [ { x: 3750, y: 2090} ], name: '9MæŸ±', sourceBox: '1P5' },
            '1P6': { positions: [ { x: 3408, y: 2760} ], name: '7NæŸ±', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P6A': { positions: [ { x: 4000, y: 2815} ], name: '7LæŸ±', sourceBox: '1P6' },
            '1L6': { positions: [ { x: 3455, y: 2760} ], name: '7NæŸ±', sourceBox: '1P6' },
            '1P7': { positions: [ { x: 1530, y: 2090} ], name: '9TæŸ±', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P7A': { positions: [ { x: 2800, y: 2083} ], name: '9PæŸ±', sourceBox: '1P7' },
            '1P7B': { positions: [ { x: 900, y: 2150} ], name: '9VæŸ±äºŒæ¨“', sourceBox: '1P7' },
            '1P7A L&R': { positions: [ { x: 2800, y: 2125} ], name: '9PæŸ±', sourceBox: '1P7A' },
            'æ–™æ¶ç…§æ˜ç›¤': { positions: [ { x: 890, y: 2100} ], name: '9VæŸ±', sourceBox: '1P7B' },
            '1P8': { positions: [ { x: 1555, y: 2840} ], name: '7TæŸ±', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P8A': { positions: [ { x: 2800, y: 2815} ], name: '7PæŸ±', sourceBox: '1P8' },
            '1P8B': { positions: [ { x: 2112, y: 2795} ], name: '7RæŸ±', sourceBox: '1P8' },
            '1P8BR1': { positions: [ { x: 2130, y: 2845} ], name: '7RæŸ±', sourceBox: '1P8B' },
            '1P9': { positions: [ { x: 1535, y: 4243} ], name: '3TæŸ±', sourceBox: 'MP2(é›»æ°£å®¤)' },
            '1P9A': { positions: [ { x: 2800, y: 4243} ], name: '3PæŸ±', sourceBox: '1P9' },
            '1P9B': { positions: [ { x: 2112, y: 4243} ], name: '3RæŸ±', sourceBox: '1P9' },
            '1L9': { positions: [ { x: 1507, y: 4210} ], name: '3TæŸ±', sourceBox: '1P9' },
            '1L9A': { positions: [ { x: 3200, y: 4730} ], name: 'å» æˆ¿å»æ‰€å¤–', sourceBox: '1L9' },
            '1R9A': { positions: [ { x: 3230, y: 4730} ], name: 'å» æˆ¿å»æ‰€å¤–', sourceBox: '1L9' },
            '1P10': { positions: [ { x: 830, y: 4852} ], name: '1VåŒ—å´é›¨é®', sourceBox: 'MP2(é›»æ°£å®¤)' },
            'ç§»å‹•å¼é›»æºç›¤': { positions: [ { x: 820, y: 3200} ], name: '6VåŒ—å´é›¨é®', sourceBox: '1P10' },
            '1P10A': { positions: [ { x: 895, y: 4909} ], name: '1VæŸ±äºŒæ¨“', sourceBox: '-' },
            '1P11': { positions: [ { x: 3750, y: 4965} ], name: '1MæŸ±', sourceBox: 'MP2A(é›»æ°£å®¤)' },
            '1L14': { positions: [ { x: 3690, y: 4990} ], name: '1MæŸ±', sourceBox: '1P11' },
            '1R14': { positions: [ { x: 3690, y: 4950} ], name: '1MæŸ±', sourceBox: '1L14' },
            '1P12': { positions: [ { x: 5010, y: 4965} ], name: '1IæŸ±', sourceBox: 'MP2A(é›»æ°£å®¤)' },
            '1P13': { positions: [ { x: 8550, y: 4407} ], name: 'æ¶ˆé˜²æ©Ÿæˆ¿å¤–', sourceBox: 'MP2A(é›»æ°£å®¤)' },
            '1L13': { positions: [ { x: 8720, y: 4300} ], name: 'è­¦è¡›å®¤å…§', sourceBox: '1P13' },
            '1R13': { positions: [ { x: 8685, y: 4300} ], name: 'è­¦è¡›å®¤å…§', sourceBox: '1P13' },
            'æ¶²ä½æ§åˆ¶ç›¤': { positions: [ { x: 8650, y: 4280} ], name: 'è­¦è¡›å®¤å…§', sourceBox: '1R13' },
            'PF&LF(ATS)': { positions: [ { x: 8886, y: 4522} ], name: 'æ¶ˆé˜²æ©Ÿæˆ¿å…§', sourceBox: 'MP2A(é›»æ°£å®¤)' },
            'PFA': { positions: [ { x: 5713, y: 4990} ], name: '1GæŸ±', sourceBox: 'PF&LF(ATS)' },
            'PF2': { positions: [ { x: 2480, y: 4968} ], name: '1QæŸ±', sourceBox: 'PFA' },
            'PF5': { positions: [ { x: 2870, y: 2070} ], name: '9P', sourceBox: 'PF2' },
            '1L15': { positions: [ { x: 2430, y: 4975} ], name: '1QæŸ±', sourceBox: 'MP2A(é›»æ°£å®¤)' },
            
           
        };

        let currentZoom = 0.15;
        let currentX = 0;
        let currentY = 0;
        let isDragging = false;
        let dragStart = { x: 0, y: 0 };
        let selectedCamera = null;
        let panLocked = false; // æ§åˆ¶å¹³ç§»é–å®š
        let panLockTimer = null; //ç”¨æ–¼ç®¡ç†é–å®šè¨ˆæ™‚å™¨
        let lastTouchTime = 0;
        let TOUCH_THROTTLE = 16; // æ”¹æˆå¸¸æ•¸ï¼Œç´„ 60fps (æ‰‹æ©Ÿå¯æ”¹æˆ 33 (30fps) æ›´æµæš¢)
        let buttonCache = new Map();
        let isZooming = false;  // è¨˜éŒ„æ˜¯å¦æ­£åœ¨ç¸®æ”¾
        let zoomCenter = null;  // è¨˜éŒ„ç¸®æ”¾ä¸­å¿ƒé»

        // åˆå§‹åŒ–
        function init() {
            createCameraButtons();
            createCameraMarkers();
            setupEventListeners();
            updateInfoPanel();

         // æ–°å¢ï¼šè¨­å®šåˆå§‹ä½ç½®åˆ°åœ–é¢ä¸­å¿ƒ
    centerMap();
}

// åœ¨ init å‡½æ•¸å¾Œé¢æ–°å¢é€™å€‹å‡½æ•¸
function centerMap() {
    const container = document.getElementById('mapContainer');
    const image = document.getElementById('floorImage');
    
    // ç­‰åœ–ç‰‡è¼‰å…¥å¾Œå†è¨ˆç®—
    if (image.complete) {
        calculateCenter();
    } else {
        image.onload = calculateCenter;
    }
    
    function calculateCenter() {
        const containerRect = container.getBoundingClientRect();
        const imageWidth = image.naturalWidth;
        const imageHeight = image.naturalHeight;
        
        // è¨ˆç®—åœ–ç‰‡ä¸­å¿ƒé»
        const imageCenterX = imageWidth / 2;
        const imageCenterY = imageHeight / 2;
        
        // è¢å¹•ä¸­å¿ƒé»
        const screenCenterX = containerRect.width / 2;
        const screenCenterY = containerRect.height / 2;
        
        // è¨­å®šåç§»é‡ï¼Œè®“åœ–ç‰‡ä¸­å¿ƒå°é½Šè¢å¹•ä¸­å¿ƒ
        currentX = screenCenterX - imageCenterX * currentZoom;
        currentY = screenCenterY - imageCenterY * currentZoom;
        
        updateMapTransform();
    }

        }

        // å‰µå»ºç›£è¦–å™¨æŒ‰éˆ•
        function createCameraButtons() {
          buttonCache.clear(); // æ¸…ç©ºå¿«å–

          Object.keys(cameras).forEach(zone => {
            const container = document.getElementById(`zone${zone}`);
            cameras[zone].forEach(camera => {
            const button = document.createElement('button');
            button.className = 'camera-btn';

            // å¦‚æœæ˜¯ã€Œè­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆã€ï¼ŒåŠ ä¸Šå°å­—é«” class
            if (camera === 'è­¦è¡›å®¤å¤–æ¢ç…§ç‡ˆ') {
                button.classList.add('camera-btn-small');
            }

            button.textContent = camera;
            button.onclick = () => selectCamera(camera, true);
            container.appendChild(button);

            // åŠ å…¥å¿«å–
            buttonCache.set(camera, button);
                });
            });
        }

        // å‰µå»ºç›£è¦–å™¨æ¨™è¨˜
        function createCameraMarkers() {
            const mapContent = document.getElementById('mapContent');
    
            Object.keys(cameras).forEach(zone => {
                 cameras[zone].forEach(camera => {
                    const posData = cameraPositions[camera];
                    if (posData && posData.positions) {
                        // ç‚ºæ¯å€‹ä½ç½®å‰µå»ºä¸€å€‹æ¨™è¨˜
                        posData.positions.forEach((pos, index) => {
                            const marker = document.createElement('div');
                            marker.className = `camera-marker zone-${zone.toLowerCase()}`;
                            marker.id = `marker-${camera}-${index}`;  // åŠ ä¸Šç´¢å¼•å€åˆ†
                            marker.dataset.deviceId = camera;  // è¨˜éŒ„è¨­å‚™ID
                    
                            marker.style.left = pos.x + 'px';
                            marker.style.top = pos.y + 'px';
                            marker.onclick = () => selectCamera(camera);
                    
                            const label = document.createElement('div');
                            label.className = 'label';
                            label.textContent = camera;
                            marker.appendChild(label);
                    
                            mapContent.appendChild(marker);
                        });
                    }
                });
            });
        }

        // é¸æ“‡ç›£è¦–å™¨
                function selectCamera(deviceId, fromSidebar = true) {  // åŠ å…¥åƒæ•¸ï¼Œé è¨­ç‚º true
            // æ¸…é™¤ä¹‹å‰çš„é¸æ“‡
            document.querySelectorAll('.camera-btn.active').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.camera-marker.active').forEach(marker => {
                marker.classList.remove('active');
            });

            selectedCamera = deviceId;
    
            // åˆ¤æ–·æ˜¯Aå€é‚„æ˜¯Bå€ï¼ˆæ ¹æ“šè¨­å‚™æ˜¯å¦åœ¨ cameras.A æˆ– cameras.B ä¸­ï¼‰
            let zone = '';
            if (cameras.A.includes(deviceId)) {
                zone = 'A';
            } else if (cameras.B.includes(deviceId)) {
                zone = 'B';
            }
                        
            if (zone === 'A') {
                // Aå€è¨­å‚™ï¼šé»äº®è‡ªå·±å’Œå°æ‡‰çš„Bå€é›»æº
                activateDevice(deviceId);
                const powerSource = powerMapping[deviceId];
                if (powerSource) {
                    activateDevice(powerSource);
                }
            } else if (zone === 'B') {
            // Bå€é›»æºï¼šé»äº®è‡ªå·±
            activateDevice(deviceId);
    
            // åªæœ‰å¾å´é‚Šæ¬„é»é¸æ™‚ï¼Œæ‰é»äº®æ‰€æœ‰ä½¿ç”¨å®ƒçš„Aå€è¨­å‚™
            if (fromSidebar) {
                Object.keys(powerMapping).forEach(aDevice => {
                    if (powerMapping[aDevice] === deviceId) {
                        activateDevice(aDevice);
                    }
                });
            }
        }

            // ç§»å‹•åˆ°ä¸»è¦é¸æ“‡çš„è¨­å‚™ä½ç½®
            const posData = cameraPositions[deviceId];
            if (posData && posData.positions && posData.positions.length > 0) {
                // ç§»å‹•åˆ°ç¬¬ä¸€å€‹é»çš„ä½ç½®
                panToPosition(posData.positions[0].x, posData.positions[0].y);
                updateInfoPanel(deviceId, zone, posData);
        }

            // æ‰‹æ©Ÿç«¯è‡ªå‹•é—œé–‰å´é‚Šæ¬„
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        // æ–°å¢è¼”åŠ©å‡½æ•¸ï¼ˆæ’å…¥åœ¨ selectCamera å¾Œé¢ï¼‰
        function activateDevice(deviceId) {
            // å¾å¿«å–å–å¾—æŒ‰éˆ•ï¼ˆä¸ç”¨æœå°‹ï¼‰
            const button = buttonCache.get(deviceId);
    
        // æ‰¾åˆ°æ‰€æœ‰å±¬æ–¼é€™å€‹è¨­å‚™çš„æ¨™è¨˜ï¼ˆå¯èƒ½æœ‰å¤šå€‹ï¼‰
        const markers = document.querySelectorAll(`[data-device-id="${deviceId}"]`);
    
        if (button) button.classList.add('active');
        markers.forEach(marker => marker.classList.add('active'));
    }

        // ç§»å‹•åˆ°æŒ‡å®šä½ç½®
        function panToPosition(x, y) {
            const container = document.getElementById('mapContainer');
            const containerRect = container.getBoundingClientRect();
            
            // è¨ˆç®—å±…ä¸­ä½ç½®
            const centerX = containerRect.width / 2;
            const centerY = containerRect.height / 2;
            
            currentX = centerX - x * currentZoom;
            currentY = centerY - y * currentZoom;
            
            updateMapTransform();
        }

        // æ›´æ–°åœ°åœ–è®Šæ›
        function updateMapTransform() {
            const mapContent = document.getElementById('mapContent');
            mapContent.style.transform = `translate(${currentX}px, ${currentY}px) scale(${currentZoom})`;
        }

        // ç¸®æ”¾åŠŸèƒ½
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 5);
            updateMapTransform();
        }

        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.09);
            updateMapTransform();
        }

        // æœå°‹åŠŸèƒ½
        function searchCameras() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

        // ä½¿ç”¨å¿«å–ï¼Œä¸ç”¨ querySelectorAll
        let visibleCount = 0;
        let lastVisibleDevice = null;
            
            buttonCache.forEach((button, cameraId) => {
                if (cameraId.toLowerCase().includes(searchTerm)) {
                    button.style.display = 'block';
                    visibleCount++;
                    lastVisibleDevice = cameraId;
                } else {
                    button.style.display = 'none';
                }
            });

            // å¦‚æœæœå°‹çµæœå”¯ä¸€ï¼Œè‡ªå‹•é¸æ“‡
            if (visibleCount === 1 && lastVisibleDevice) {
                selectCamera(lastVisibleDevice);
            }
        }

        // è¿½è¹¤é›»æºè·¯å¾‘
        function getPowerPath(deviceId) {
            const path = [];
            let current = deviceId;
            const visited = new Set(); // é˜²æ­¢å¾ªç’°
    
            // å¾€ä¸Šè¿½è¹¤é›»æº
            while (current && !visited.has(current)) {
                visited.add(current);
                path.unshift(current); // åŠ åˆ°é™£åˆ—å‰é¢
        
                const posData = cameraPositions[current];
                if (posData && posData.sourceBox) {
                    current = posData.sourceBox;
                } else {
                    break;
                }
            }
    
            return path;
        }

        // å‰µå»ºé›»æºè·¯å¾‘æŒ‰éˆ•
        function createPowerPathButtons(path, targetDeviceId = null, targetDisplayName = null) {  // åŠ å…¥å…©å€‹åƒæ•¸
            const container = document.getElementById('infoPowerPath');
            container.innerHTML = ''; // æ¸…ç©º
    
            if (path.length > 1) {  
                const label = document.createElement('div');
                label.className = 'power-path-label';
                label.textContent = 'é›»æºè·¯å¾‘ï¼š';
                container.appendChild(label);
        
                const buttonContainer = document.createElement('div');
        
                path.forEach((deviceId, index) => {
                    // å‰µå»ºæŒ‰éˆ•
                    const button = document.createElement('button');
                    button.className = 'power-path-button';
                    button.textContent = deviceId;
                    button.onclick = () => jumpToDevice(deviceId);
                    buttonContainer.appendChild(button);
            
                    // åŠ ç®­é ­
                    const arrow = document.createElement('span');
                    arrow.className = 'power-path-arrow';
                    arrow.textContent = 'â†’';
                    buttonContainer.appendChild(arrow);
                });
        
                // åŠ å…¥ç›®æ¨™è¨­å‚™æŒ‰éˆ•ï¼ˆåœ¨æœ€å¾Œï¼‰
                if (targetDeviceId && targetDisplayName) {
                    const targetButton = document.createElement('button');
                    targetButton.className = 'power-path-button';
                    targetButton.textContent = targetDisplayName;  // ä½¿ç”¨è‡ªè¨‚åç¨±
                    targetButton.onclick = () => jumpToDevice(targetDeviceId);  // é»æ“Šè·³å›åŸè¨­å‚™
                    buttonContainer.appendChild(targetButton);
                }
        
                container.appendChild(buttonContainer);
            }
        }

        // åªè·³è½‰åˆ°è¨­å‚™ä½ç½®ä¸¦é–ƒçˆï¼Œä¸æ”¹è®Šè³‡è¨Šé¢æ¿
        function jumpToDevice(deviceId) {
            // æ¸…é™¤ä¹‹å‰çš„é«˜äº®
            document.querySelectorAll('.camera-marker.active').forEach(marker => {
                marker.classList.remove('active');
            });
    
            // åªé«˜äº®ç›®æ¨™è¨­å‚™ï¼ˆä¸é«˜äº®å…¶ä»–é—œè¯è¨­å‚™ï¼‰
            const markers = document.querySelectorAll(`[data-device-id="${deviceId}"]`);
            markers.forEach(marker => marker.classList.add('active'));
    
            // ç§»å‹•åˆ°è¨­å‚™ä½ç½®
            const posData = cameraPositions[deviceId];
            if (posData && posData.positions && posData.positions.length > 0) {
                panToPosition(posData.positions[0].x, posData.positions[0].y);
            }
    
         // ä¸æ”¹è®Š selectedCameraï¼Œä¸æ›´æ–°è³‡è¨Šé¢æ¿
        }

        // æ›´æ–°è³‡è¨Šé¢æ¿
        function updateInfoPanel(deviceId, zone, posData) {
            const panel = document.getElementById('infoPanel');
            
            if (deviceId && posData) {
                    const isAZone = zone === 'A';

                    if (isAZone){
                    // Aå€ï¼šé¡¯ç¤ºè¨­å‚™åç¨±ã€ç„¡ç†”çµ²é–‹é—œã€é›»ç®±å…§åç¨±
                    document.getElementById('infoTitle').textContent = posData.name || deviceId;
                    document.getElementById('infoLine1').textContent = `ä¾†æºé›»ç®± : ${powerMapping[deviceId] || '--'}`;
                    document.getElementById('infoLine2').textContent = `ç„¡ç†”çµ²é–‹é—œ : ${posData.nfb || '--'}`;
                    document.getElementById('infoLine3').textContent = `é›»ç®±å…§åç¨± : ${posData.boxName || '--'}`;
            
                    // é¡¯ç¤ºé›»æºè·¯å¾‘ï¼ˆå¾ä¾†æºé›»ç®±é–‹å§‹è¿½è¹¤ï¼‰
                    const powerSource = powerMapping[deviceId];
                    if (powerSource) {
                        const path = getPowerPath(powerSource);
                        createPowerPathButtons(path, deviceId, posData.displayName);  // å‚³å…¥è¨­å‚™IDå’Œé¡¯ç¤ºåç¨±
                    } else {
                        document.getElementById('infoPowerPath').innerHTML = '';
                    }

                } else {
                    // Bå€ï¼šé¡¯ç¤ºé›»ç®±åç¨±ã€ä¸Šå±¤ä¾†æºé›»ç®±
                    document.getElementById('infoTitle').textContent = deviceId;
                    document.getElementById('infoLine1').textContent = `é›»ç®±ä½ç½® : ${posData.name || '--'}`;
                    document.getElementById('infoLine2').textContent = `ä¸Šå±¤é›»æº : ${posData.sourceBox || '--'}`;
                    document.getElementById('infoLine3').textContent = '';  // Bå€åªé¡¯ç¤ºå…©è¡Œ
            
                    // é¡¯ç¤ºé›»æºè·¯å¾‘ï¼ˆå¾ç•¶å‰é›»ç®±é–‹å§‹è¿½è¹¤ï¼‰
                    const path = getPowerPath(deviceId);
                    createPowerPathButtons(path);
                }
        
                panel.classList.add('active');
            } else {
                document.getElementById('infoTitle').textContent = 'è«‹é¸æ“‡è¨­å‚™';
                document.getElementById('infoLine1').textContent = '--';
                document.getElementById('infoLine2').textContent = '--';
                document.getElementById('infoLine3').textContent = '--';
                document.getElementById('infoPowerPath').innerHTML = '';  // æ¸…ç©ºé›»æºè·¯å¾‘
                panel.classList.remove('active');
                }
        }

        // è¨­ç½®äº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            const mapContainer = document.getElementById('mapContainer');
            
            // æ»‘é¼ äº‹ä»¶
            mapContainer.addEventListener('mousedown', startDrag);
            mapContainer.addEventListener('wheel', handleWheel);
            
            // è§¸æ§äº‹ä»¶
            mapContainer.addEventListener('touchstart', handleTouchStart);
            mapContainer.addEventListener('touchmove', handleTouchMove);
            mapContainer.addEventListener('touchend', handleTouchEnd);
            
            // éµç›¤äº‹ä»¶
            document.addEventListener('keydown', handleKeyDown);
        }

        // æ‹–æ‹½åŠŸèƒ½
        function startDrag(e) {
            if (e.button !== 0) return; // åªéŸ¿æ‡‰å·¦éµ

            isDragging = true;
            dragStart.x = e.clientX;
            dragStart.y = e.clientY;

            // åœ¨ document ä¸Šæ·»åŠ äº‹ä»¶ç›£è½å™¨
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', endDrag);
    
            e.preventDefault(); // é˜²æ­¢é¸å–æ–‡å­—
        }

        function drag(e) {
            if (!isDragging) return;
            
            const deltaX = e.clientX - dragStart.x;
            const deltaY = e.clientY - dragStart.y;

            currentX += deltaX;
            currentY += deltaY;
    
            dragStart.x = e.clientX;
            dragStart.y = e.clientY;
    
            updateMapTransform();
        }

        function endDrag() {
            isDragging = false;

            // ç§»é™¤äº‹ä»¶ç›£è½å™¨
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', endDrag);
        }

        // æ»¾è¼ªç¸®æ”¾
        function handleWheel(e) {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newZoom = Math.max(0.09, Math.min(5, currentZoom * delta));
            
            if (newZoom !== currentZoom) {
                const rect = e.currentTarget.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                currentX = x - (x - currentX) * (newZoom / currentZoom);
                currentY = y - (y - currentY) * (newZoom / currentZoom);
                currentZoom = newZoom;
                
                updateMapTransform();
            }
        }

        // è§¸æ§äº‹ä»¶
        let lastTouchDistance = 0;
        let touchStartX = 0;
        let touchStartY = 0;

        function handleTouchStart(e) {
    if (e.touches.length === 1) {
        touchStartX = e.touches[0].clientX - currentX;
        touchStartY = e.touches[0].clientY - currentY;
    } else if (e.touches.length === 2) {
        lastTouchDistance = getTouchDistance(e.touches);
        
        // ç¸®æ”¾é–‹å§‹æ™‚ï¼Œæ±ºå®šç¸®æ”¾ä¸­å¿ƒé»
        isZooming = true;
        
        if (selectedCamera && cameraPositions[selectedCamera]) {
            // å¦‚æœæœ‰é¸ä¸­è¨­å‚™ï¼Œä»¥è¨­å‚™ä½ç½®ç‚ºä¸­å¿ƒ
            const posData = cameraPositions[selectedCamera];
            if (posData.positions && posData.positions.length > 0) {
                const pos = posData.positions[0];
                zoomCenter = { x: pos.x, y: pos.y, type: 'device' };
            }
        } else {
            // å¦‚æœæ²’é¸è¨­å‚™ï¼Œä»¥é›™æŒ‡ä¸­é»ç‚ºä¸­å¿ƒ
            const touch1 = e.touches[0];
            const touch2 = e.touches[1];
            const centerX = (touch1.clientX + touch2.clientX) / 2;
            const centerY = (touch1.clientY + touch2.clientY) / 2;
            
            const container = document.getElementById('mapContainer');
            const rect = container.getBoundingClientRect();
            zoomCenter = { 
                x: centerX - rect.left, 
                y: centerY - rect.top, 
                type: 'touch' 
            };
        }
    }
}


        function handleTouchMove(e) {
            e.preventDefault();
            
        // ç¯€æµï¼šé™åˆ¶æ›´æ–°é »ç‡
        const now = Date.now();
        if (now - lastTouchTime < TOUCH_THROTTLE) {  // ä½¿ç”¨å¸¸æ•¸
            return;
        }
        lastTouchTime = now;


            if (e.touches.length === 1) {
                // æª¢æŸ¥æ˜¯å¦åœ¨å¹³ç§»é–å®šæœŸé–“
                if (!panLocked) {
                    currentX = e.touches[0].clientX - touchStartX;
                    currentY = e.touches[0].clientY - touchStartY;
                    updateMapTransform();
                }

            } else if (e.touches.length === 2) {
                const distance = getTouchDistance(e.touches);
                const delta = distance / lastTouchDistance;
                const newZoom = Math.max(0.1, Math.min(5, currentZoom * delta));
                
                if (newZoom !== currentZoom && zoomCenter) {
                    // æ ¹æ“šç¸®æ”¾ä¸­å¿ƒé¡å‹è¨ˆç®—
                     if (zoomCenter.type === 'device') {
                     // ä»¥é¸ä¸­è¨­å‚™ç‚ºä¸­å¿ƒç¸®æ”¾
                     const container = document.getElementById('mapContainer');
                     const containerRect = container.getBoundingClientRect();
                     const screenCenterX = containerRect.width / 2;
                     const screenCenterY = containerRect.height / 2;
            
                     currentX = screenCenterX - zoomCenter.x * newZoom;
                     currentY = screenCenterY - zoomCenter.y * newZoom;

                } else if (zoomCenter.type === 'touch') {
                    // ä»¥é›™æŒ‡ä¸­é»ç‚ºä¸­å¿ƒç¸®æ”¾ï¼ˆç›¸å°ä½ç§»ï¼‰
                    currentX = zoomCenter.x - (zoomCenter.x - currentX) * (newZoom / currentZoom);
                    currentY = zoomCenter.y - (zoomCenter.y - currentY) * (newZoom / currentZoom);
                }
        
                currentZoom = newZoom;
                updateMapTransform();

                // æ”¹è‰¯çš„é–å®šæ©Ÿåˆ¶ï¼šæ¸…é™¤èˆŠè¨ˆæ™‚å™¨
                if (panLockTimer) {
                    clearTimeout(panLockTimer);
                    }

                // é–å®šå¹³ç§»åŠŸèƒ½0.3ç§’
                panLocked = true;
                panLockTimer = setTimeout(() => {
                    panLocked = false;
                    panLockTimer = null;
                }, 300);
            }
                
            lastTouchDistance = distance;
            }
        }

        function handleTouchEnd(e) {
            if (e.touches.length === 0) {
                touchStartX = 0;
                touchStartY = 0;
            }
        }

        function getTouchDistance(touches) {
            const dx = touches[0].clientX - touches[1].clientX;
            const dy = touches[0].clientY - touches[1].clientY;
            return Math.sqrt(dx * dx + dy * dy);
        }

        // éµç›¤å¿«æ·éµ
        function handleKeyDown(e) {
            switch(e.key) {
                case '+':
                case '=':
                    zoomIn();
                    break;
                case '-':
                    zoomOut();
                    break;
                case 'Escape':
                    selectedCamera = null;
                    document.querySelectorAll('.camera-btn.active').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    document.querySelectorAll('.camera-marker.active').forEach(marker => {
                        marker.classList.remove('active');
                    });
                    updateInfoPanel();
                    break;
            }
        }

        // å´é‚Šæ¬„åˆ‡æ›
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

// æ–°å¢ï¼šåˆ‡æ›è³‡è¨Šé¢æ¿æ”¶èµ·/å±•é–‹
function toggleInfoPanel() {
    const panel = document.getElementById('infoPanel');
    const toggleBtn = document.getElementById('infoToggleBtn');
    
    panel.classList.toggle('collapsed');
    
    // åˆ‡æ›ç®­é ­æ–¹å‘
    if (panel.classList.contains('collapsed')) {
        toggleBtn.textContent = 'â–²';
    } else {
        toggleBtn.textContent = 'â–¼';
    }
}

// æ–°å¢ï¼šæ¸…é™¤é¸æ“‡
function clearSelection() {
    selectedCamera = null;
    
    // ç§»é™¤æ‰€æœ‰é«˜äº®
    document.querySelectorAll('.camera-btn.active').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelectorAll('.camera-marker.active').forEach(marker => {
        marker.classList.remove('active');
    });
    
    // éš±è—è³‡è¨Šé¢æ¿
    const panel = document.getElementById('infoPanel');
    panel.classList.remove('active');
    panel.classList.remove('collapsed');
    
    // é‡ç½®ç®­é ­
    document.getElementById('infoToggleBtn').textContent = 'â–¼';
    
    // æ¸…ç©ºå…§å®¹
    updateInfoPanel();
}

        // åˆå§‹åŒ–ç³»çµ±
        init();

        function closeModal() {
            document.getElementById("pdfModal").style.display = "none";
            localStorage.setItem("pdfModalClosed", "true"); // è¨˜éŒ„å·²é—œé–‰
        }

        function showPdfModal() {
          document.getElementById("pdfModal").style.display = "block";
        }

        window.addEventListener('load', () => {
            // å¦‚æœ localStorage è£¡æ²’æœ‰è¨˜éŒ„ï¼Œé¡¯ç¤ºå½ˆçª—
            if (!localStorage.getItem("pdfModalClosed")) {
                setTimeout(() => {
                    document.getElementById("pdfModal").style.display = "block";
                }, 500); // å»¶é² 0.5 ç§’è·³å‡º
            }
        });


    </script>
    
    <!-- ğŸ“„ ä½¿ç”¨èªªæ˜å½ˆçª— -->
    <div id="pdfModal" style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #FFFFDF;
        padding: 20px 30px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        border-radius: 12px;
        z-index: 3000;
        max-width: 90%;
        width: 400px;
        text-align: center;
        display: none;
    ">
      <button onclick="closeModal()" style="
        position: absolute;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: #999;
      ">&times;</button>
      <h3 style="margin-bottom: 12px;">ğŸ“„ ä½¿ç”¨èªªæ˜</h3>
      <p>è«‹åƒé–±æ“ä½œæŒ‡å—ï¼š<br>
        <a href="how to use.pdf" target="_blank" style="color: #3498db;">é»æˆ‘ä¸‹è¼‰ PDF</a>
      </p>
    </div>


</body>
</html>